var Spinners={version:"3.0.0"};!function(t){function i(t){return t*Math.PI/180}function e(t){this.element=t}function n(i,e){i&&(this.element=i,a.remove(i),a.removeDetached(),this._position=0,this._state="stopped",this.setOptions(t.extend({color:"#000",dashes:12,radius:5,height:5,width:1.8,opacity:1,padding:3,rotation:700},e||{})),this.drawPosition(0),a.add(this))}var s={scroll:function(t,i){if(!i)return t;var e=t.slice(0,i);return t.slice(i,t.length).concat(e)},isElement:function(t){return t&&1==t.nodeType},element:{isAttached:function(){return function(t){for(;t&&t.parentNode;)t=t.parentNode;return!!t&&!!t.body}}()}},o={drawRoundedRectangle:function(e,n){var s=t.extend({top:0,left:0,width:0,height:0,radius:0},n||{}),o=s.left,r=s.top,a=s.width,h=s.height,s=s.radius;e.beginPath(),e.moveTo(o+s,r),e.arc(o+a-s,r+s,s,i(-90),i(0),!1),e.arc(o+a-s,r+h-s,s,i(0),i(90),!1),e.arc(o+s,r+h-s,s,i(90),i(180),!1),e.arc(o+s,r+s,s,i(-180),i(-90),!1),e.closePath(),e.fill()}},r=function(){function t(t){var e=[];if(0==t.indexOf("#")&&(t=t.substring(1)),t=t.toLowerCase(),""!=t.replace(i,""))return null;for(3==t.length?(e[0]=t.charAt(0)+t.charAt(0),e[1]=t.charAt(1)+t.charAt(1),e[2]=t.charAt(2)+t.charAt(2)):(e[0]=t.substring(0,2),e[1]=t.substring(2,4),e[2]=t.substring(4)),t=0;t<e.length;t++)e[t]=parseInt(e[t],16);return e.red=e[0],e.green=e[1],e.blue=e[2],e}var i=RegExp("[0123456789abcdef]","g"),e=function(){function t(t,i,e){return t=t.toString(e||10),Array(i-t.length).join("0")+t}return function(i,e,n){return"#"+t(i,2,16)+t(e,2,16)+t(n,2,16)}}();return{hex2rgb:t,hex2fill:function(i,e){"undefined"==typeof e&&(e=1);var n=e,s=t(i);return s[3]=n,s.opacity=n,"rgba("+s.join()+")"},rgb2hex:e}}();t.extend(Spinners,{enabled:!1,support:{canvas:function(){var i=t("<canvas>")[0];return!!i.getContext&&!!i.getContext("2d")}()},init:function(){(this.support.canvas||window.G_vmlCanvasManager&&window.attachEvent&&-1===navigator.userAgent.indexOf("Opera"))&&(window.G_vmlCanvasManager&&window.G_vmlCanvasManager.init_(document),this.enabled=!0)},create:function(t,i){return e.create(t,i),this.get(t)},get:function(t){return new e(t)},play:function(t){return this.get(t).play(),this},pause:function(t){return this.get(t).pause(),this},toggle:function(t){return this.get(t).toggle(),this},stop:function(t){return this.get(t).stop(),this},remove:function(t){return this.get(t).remove(),this},removeDetached:function(){return a.removeDetached(),this},center:function(t){return this.get(t).center(),this},setOptions:function(t,i){return this.get(t).setOptions(i),this},getDimensions:function(t){return t=2*a.get(t)[0].getLayout().workspace.radius,{width:t,height:t}}});var a={spinners:[],get:function(i){if(i){var e=[];return t.each(this.spinners,function(n,o){o&&(s.isElement(i)?o.element==i:t(o.element).is(i))&&e.push(o)}),e}},add:function(t){this.spinners.push(t)},remove:function(i){t(t.map(this.spinners,function(e){return(s.isElement(i)?e.element==i:t(e.element).is(i))?e.element:void 0})).each(t.proxy(function(t,i){this.removeByElement(i)},this))},removeByElement:function(i){var e=this.get(i)[0];e&&(e.remove(),this.spinners=t.grep(this.spinners,function(t){return t.element!=i}))},removeDetached:function(){t.each(this.spinners,t.proxy(function(t,i){i&&i.element&&!s.element.isAttached(i.element)&&this.remove(i.element)},this))}};t.extend(e,{create:function(i,e){if(i){var o=e||{},r=[];return s.isElement(i)?r.push(new n(i,o)):t(i).each(function(t,i){r.push(new n(i,o))}),r}}}),t.extend(e.prototype,{items:function(){return a.get(this.element)},play:function(){return t.each(this.items(),function(t,i){i.play()}),this},stop:function(){return t.each(this.items(),function(t,i){i.stop()}),this},pause:function(){return t.each(this.items(),function(t,i){i.pause()}),this},toggle:function(){return t.each(this.items(),function(t,i){i.toggle()}),this},center:function(){return t.each(this.items(),function(t,i){i.center()}),this},setOptions:function(i){return t.each(this.items(),function(t,e){e.setOptions(i)}),this},remove:function(){return a.remove(this.element),this}}),t.extend(n.prototype,{setOptions:function(i){this.options=t.extend({},this.options,i||{}),this.options.radii&&(i=this.options.radii,this.options.radius=Math.min(i[0],i[1]),this.options.height=Math.max(i[0],i[1])-this.options.radius),this.options.dashWidth&&(this.options.width=this.options.dashWidth),this.options.speed&&(this.options.duration=1e3*this.options.speed);var i=this._state,e=this._position;switch(this._layout=null,this.build(),e&&e>=this.options.dashes-1&&(this._position=this.options.dashes-1),i){case"playing":this.play();break;case"paused":case"stopped":this.drawPosition(this._position)}this._centered&&this.center()},remove:function(){this.canvas&&(this.pause(),t(this.canvas).remove(),this.ctx=this.canvas=null)},build:function(){this.remove();var i=this.getLayout().workspace.radius;return t(document.body).append(this.canvas=t("<canvas>").attr({width:2*i,height:2*i}).css({zoom:1})),window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.canvas[0]),this.ctx=this.canvas[0].getContext("2d"),this.ctx.globalAlpha=this.options.opacity,t(this.element).append(this.canvas),this.ctx.translate(i,i),this},drawPosition:function(t){var e=this.getLayout().workspace,t=s.scroll(e.opacities,-1*t),n=e.radius,e=this.options.dashes,o=i(360/e);for(this.ctx.clearRect(-1*n,-1*n,2*n,2*n),n=0;e>n;n++)this.drawDash(t[n],this.options.color),this.ctx.rotate(o)},drawDash:function(t,i){this.ctx.fillStyle=r.hex2fill(i,t);var e=this.getLayout(),n=e.workspace.radius,s=e.dash.position,e=e.dash.dimensions;o.drawRoundedRectangle(this.ctx,{top:s.top-n,left:s.left-n,width:e.width,height:e.height,radius:Math.min(e.height,e.width)/2})},_nextPosition:function(){var i=this.options.rotation/this.options.dashes;this.nextPosition(),this._playTimer=window.setTimeout(t.proxy(this._nextPosition,this),i)},nextPosition:function(){this._position==this.options.dashes-1&&(this._position=-1),this._position++,this.drawPosition(this._position)},play:function(){if("playing"!=this._state){this._state="playing";var i=this.options.rotation/this.options.dashes;return this._playTimer=window.setTimeout(t.proxy(this._nextPosition,this),i),this}},pause:function(){return"paused"!=this._state?(this._pause(),this._state="paused",this):void 0},_pause:function(){this._playTimer&&(window.clearTimeout(this._playTimer),this._playTimer=null)},stop:function(){return"stopped"!=this._state?(this._pause(),this._position=0,this.drawPosition(0),this._state="stopped",this):void 0},toggle:function(){return this["playing"==this._state?"pause":"play"](),this},getLayout:function(){if(this._layout)return this._layout;for(var t=this.options,i=t.dashes,e=t.width,n=t.radius,s=t.radius+t.height,o=Math.max(e,s),o=Math.ceil(Math.max(o,Math.sqrt(s*s+e/2*(e/2)))),t=o+=t.padding,r=1/i,a=[],h=0;i>h;h++)a.push((h+1)*r);return this._layout=i={workspace:{radius:t,opacities:a},dash:{position:{top:o-s,left:o-e/2},dimensions:{width:e,height:s-n}}}},center:function(){var i=2*this.getLayout().workspace.radius;t(this.element.parentNode).css({position:"relative"}),t(this.element).css({position:"absolute",height:i+"px",width:i+"px",top:"50%",left:"50%",marginLeft:-.5*i+"px",marginTop:-.5*i+"px"}),this._centered=!0}}),Spinners.init(),Spinners.enabled||(e.create=function(){return[]})}(jQuery);